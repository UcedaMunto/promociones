
var vectorTablas= Array();
var comboVector= Array();


function escanerElements(){// ESCANEA EL CUERPO DE LA PANTALLA PARA BUSCAR LOS SELECT A Y LAS TABLAS CON ID='tabla_' para darles formato
    var children = document.getElementById('layoutSidenav_content').getElementsByTagName('*');
    combosBoxs();
    datepik();
    
    for( var i = 0; i<children.length; i++){
        var t = children.item(i); 
        if(children.item(i).tagName== "TABLE" && children.item(i).id.includes('tabla_')){
            console.log('tabla encontrada'+children.item(i).id);
            tables( children.item(i) );
        }
    }
    
}
escanerElements();

function combosBoxs(){
    $( '.myselect2' ).select2();
  comboVector[ comboVector.length ]=$('.myselect' ).selectize(); //GUARDA UN VECTOR CON TODOS LOS COMBOBOX PARA MANEJARLOS LUEGO - EN ORDEN DE ARRIBA A BAJO
}
function datepik(){
    console.log('datepicker');
    $( ".datepicker" ).datepicker( { dateFormat: 'yy-mm-dd' }  );
}
function tables(item ){
    (function (item, dos,) {
        console.log('------------------------escuchar tabla');
    idTabla='#'+item.id;

        //*----------------------------------BUSCADORES POR COLUMNA  */
            $(idTabla+' thead tr').clone(true).appendTo( idTabla+' thead' );
            $(idTabla+' thead tr:eq(1) th').each( function (i) {
                var title = $(this).text();
                $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
        
                $( 'input', this ).on( 'keyup change', function () {
                    if ( table.column(i).search() !== this.value ) {
                        table
                            .column(i)
                            .search( this.value )
                            .draw();
                    }
                } );
            } );
        //*---------------------------------- FIN BUSCADORES POR COLUMNA  */
        var table= $(idTabla).DataTable({
            select: true,
            "scrollY":        "400px",
            "scrollCollapse": true,
            "paging":         true,
            "sScrollX": "100%"
        });

        $('a.toggle-vis').on( 'click', function (e) {
            e.preventDefault();
            var column = table.column( $(this).attr('data-column') );
            column.visible( ! column.visible() );
        } );
   

        vectorTablas[ vectorTablas.length ]= table;

        document.querySelectorAll( tablaStr+' a' ).forEach(item => {
            item.addEventListener('click', event => {
            event.preventDefault();
            console.log("boton de tabla");
                    
            })
        })

      }(item, "parametro2"));
}





